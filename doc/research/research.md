# 調査

## 目的の確認

人狼ゲーム「前川鯖」において、自動化されたツールを提供することにより、盤面把握を確実化する。
（把握漏れによる凡ミスを防ぎ、村の知識レベルを底支えする）

* メイン画面を 前川鯖 http://alicegame.xsrv.jp/takane/ 上の村とする。
* サイドバーを用いて、メイン画面と同じ画面に別ペインを得る。

本プロジェクトは、 jinrou-wakamete-analyzer https://github.com/stageleft/jinrou-wakamete-analyzer をフォークしたものであり、
基本的には上記プロジェクトに従うが、前川鯖特有のカスタマイズが必要となる部分がある。

## 前川鯖について

前川鯖とは、 「人狼式 ～汝は人狼なりや？ 式神研究同好会版」 のスクリプトを用いているサーバであり、 バージョン 3.1.0 RC1 とされている。

「人狼式 ～汝は人狼なりや？ 式神研究同好会版」 にて配布中の、最も近いバージョンのスクリプトは バージョン 3.1.0 であったので、調査用に本PJでもコピーを保存する。
（最新のアルファ版 4.1.0 alpha8 、最新の安定版 4.0.1 が公開されており、）

## 前川鯖で新規に必要となる機能

## 前川鯖で修正を行うべき機能

* 配役の考え方（sidebar.htmlおよび関連js、ようは wakamete-plugins.js/sidebar.js の基本機能以外ほぼ全て）
  役職の数の考え方がまるで違うので１から再設計するつもりで。
* ログの一次解析・取り込み方法の修正（logparser.js など）。
  HTMLの作り方が違うので当然っちゃ当然。

## 前川鯖で不要となる機能

* 自動リロード機能は前川鯖に搭載済であり、不要である。（旧 wakamete-plugins.js）。
  仕組みとしてはHTMLの `<meta http-equiv="Refresh">` を利用した自動リフレッシュとなっている。
* スクロール状態の固定化機能も、上記 meta タグにより実現されている様子なので不要と判断する。（旧 wakamete-plugins.js）。
* シングルページのみであり、フレーム対応は不要である。（旧 wakamete-plugins.js）。
